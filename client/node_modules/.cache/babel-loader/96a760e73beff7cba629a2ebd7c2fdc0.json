{"ast":null,"code":"import _classCallCheck from\"/Users/fleetx/Desktop/React-Linkedin-Login/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/fleetx/Desktop/React-Linkedin-Login/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/fleetx/Desktop/React-Linkedin-Login/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/fleetx/Desktop/React-Linkedin-Login/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import\"./App.css\";import\"react-s-alert/dist/s-alert-default.css\";import\"react-s-alert/dist/s-alert-css-effects/slide.css\";import React,{Component}from\"react\";import Alert from\"react-s-alert\";import FontAwesomeIcon from\"@fortawesome/react-fontawesome\";import ProfileCard from\"./components/ProfileCard\";import _ from'lodash';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.handlePostMessage=function(event){if(event.data.type===\"profile\"){_this.updateProfile(event.data.profile);Alert.success(\"Login successful: \".concat(event.data.profile.localizedFirstName),{position:'top'});}};_this.updateProfile=function(profile){console.log(profile);_this.setState({isAuthorized:true,firstName:_.get(profile,'localizedFirstName',''),lastName:_.get(profile,'localizedLastName',''),profileURL:\"https://www.linkedin.com/in/\".concat(_.get(profile,'vanityName','')),pictureURL:_.get(_.last(_.get(profile,'profilePicture.displayImage~.elements','')),'identifiers[0].identifier','')});};_this.requestProfile=function(){var oauthUrl=\"https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id=\".concat(process.env.REACT_APP_CLIENT_ID,\"&scope=r_liteprofile&state=123456&redirect_uri=\").concat(process.env.REACT_APP_REDIRECT_URI);var width=450,height=730,left=window.screen.width/2-width/2,top=window.screen.height/2-height/2;window.open(oauthUrl,\"Linkedin\",\"menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=\"+width+\", height=\"+height+\", top=\"+top+\", left=\"+left);};_this.state={isAuthorized:false,firstName:null,lastName:null,profileURL:null,pictureURL:null};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){window.addEventListener('message',this.handlePostMessage);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"header\",{className:\"App-header\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"App-title\"},\"React Linkedin Login\"),/*#__PURE__*/React.createElement(\"p\",{className:\"App-intro\"},\"A demo page for Linkedin login\"),/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:[\"fab\",\"github\"]}),\" \",/*#__PURE__*/React.createElement(\"a\",{href:\"https://github.com/tonyxu-io/React-Linkedin-Login\",className:\"github-link\"},\"tonyxu-io/React-Linkedin-Login\"),/*#__PURE__*/React.createElement(Alert,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"App-body\"},/*#__PURE__*/React.createElement(\"button\",{onClick:this.requestProfile},\"Linkedin Login\"),this.state.isAuthorized&&/*#__PURE__*/React.createElement(ProfileCard,{firstName:this.state.firstName,lastName:this.state.lastName,profileURL:this.state.profileURL,pictureURL:this.state.pictureURL})));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/fleetx/Desktop/React-Linkedin-Login/client/src/App.js"],"names":["React","Component","Alert","FontAwesomeIcon","ProfileCard","_","App","props","handlePostMessage","event","data","type","updateProfile","profile","success","localizedFirstName","position","console","log","setState","isAuthorized","firstName","get","lastName","profileURL","pictureURL","last","requestProfile","oauthUrl","process","env","REACT_APP_CLIENT_ID","REACT_APP_REDIRECT_URI","width","height","left","window","screen","top","open","state","addEventListener"],"mappings":"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","sourcesContent":["import \"./App.css\";\nimport \"react-s-alert/dist/s-alert-default.css\";\nimport \"react-s-alert/dist/s-alert-css-effects/slide.css\";\n\nimport React, { Component } from \"react\";\n\nimport Alert from \"react-s-alert\";\nimport FontAwesomeIcon from \"@fortawesome/react-fontawesome\";\nimport ProfileCard from \"./components/ProfileCard\";\nimport _ from 'lodash';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAuthorized: false,\n      firstName: null,\n      lastName: null,\n      profileURL: null,\n      pictureURL: null,\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener('message', this.handlePostMessage);\n  }\n\n  handlePostMessage = (event) => {\n    if (event.data.type === \"profile\") {\n      this.updateProfile(event.data.profile);\n      Alert.success(`Login successful: ${event.data.profile.localizedFirstName}`,{position:'top'});\n    }\n  };\n\n  updateProfile = (profile) => {\n    console.log(profile)\n      this.setState({\n        isAuthorized: true,\n        firstName: _.get(profile,'localizedFirstName',''),\n        lastName: _.get(profile,'localizedLastName',''),\n        profileURL: `https://www.linkedin.com/in/${_.get(profile,'vanityName','')}`,\n        pictureURL: _.get(_.last(_.get(profile,'profilePicture.displayImage~.elements','')),'identifiers[0].identifier','')\n      })\n  }\n\n  requestProfile = () => {\n    var oauthUrl = `https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id=${process.env.REACT_APP_CLIENT_ID}&scope=r_liteprofile&state=123456&redirect_uri=${process.env.REACT_APP_REDIRECT_URI}`\n    var width = 450,\n      height = 730,\n      left = window.screen.width / 2 - width / 2,\n      top = window.screen.height / 2 - height / 2;\n\n    window.open(\n      oauthUrl,\n      \"Linkedin\",\n      \"menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=\" +\n        width +\n        \", height=\" +\n        height +\n        \", top=\" +\n        top +\n        \", left=\" +\n        left\n    );\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <h1 className=\"App-title\">React Linkedin Login</h1>\n          <p className=\"App-intro\">A demo page for Linkedin login</p>\n          <FontAwesomeIcon icon={[\"fab\", \"github\"]} />{\" \"}\n          <a\n            href=\"https://github.com/tonyxu-io/React-Linkedin-Login\"\n            className=\"github-link\"\n          >\n            tonyxu-io/React-Linkedin-Login\n          </a>\n          <Alert />\n        </header>\n        <div className=\"App-body\">\n          <button onClick={this.requestProfile}>Linkedin Login</button>\n          {this.state.isAuthorized &&\n            (\n              <ProfileCard\n                firstName={this.state.firstName}\n                lastName={this.state.lastName}\n                profileURL={this.state.profileURL}\n                pictureURL={this.state.pictureURL}\n              />\n            )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}